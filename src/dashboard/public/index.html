<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>A2A Dashboard</title>
  <link rel="stylesheet" href="./style.css">
</head>
<body>
  <header>
    <h1>A2A Dashboard</h1>
    <p>Contacts, calls, settings, and invites.</p>
  </header>

  <nav>
    <button class="tab is-active" data-tab="contacts">Contacts</button>
    <button class="tab" data-tab="calls">Calls</button>
    <button class="tab" data-tab="logs">Logs</button>
    <button class="tab" data-tab="settings">Settings</button>
    <button class="tab" data-tab="invites">Invites</button>
  </nav>

  <main>
    <section id="tab-contacts" class="panel is-active">
      <div class="row">
        <h2>Contacts</h2>
        <button id="refresh-contacts">Refresh</button>
      </div>

      <div class="card">
        <h3>Add Contact</h3>
        <form id="add-contact-form">
          <label>Invite URL <input id="add-contact-url" type="text" placeholder="a2a://host/token" required></label>
          <label>Name <input id="add-contact-name" type="text" placeholder="Agent name (optional)"></label>
          <label>Owner <input id="add-contact-owner" type="text" placeholder="Human owner (optional)"></label>
          <label>Tags <input id="add-contact-tags" type="text" placeholder="comma,separated (optional)"></label>
          <div class="row">
            <button type="submit">Add</button>
          </div>
        </form>
      </div>

      <table id="contacts-table">
        <thead>
          <tr>
            <th>Name</th>
            <th>Owner</th>
            <th>Status</th>
            <th>Calls</th>
            <th>Last Summary</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
      <div id="contact-calls"></div>
    </section>

    <section id="tab-calls" class="panel">
      <div class="row">
        <h2>Calls</h2>
        <button id="refresh-calls">Refresh</button>
      </div>
      <table id="calls-table">
        <thead>
          <tr>
            <th>Conversation</th>
            <th>Contact</th>
            <th>Status</th>
            <th>Messages</th>
            <th>Updated</th>
            <th>Summary</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
      <div id="call-detail"></div>
    </section>

    <section id="tab-logs" class="panel">
      <div class="row">
        <h2>Logs</h2>
        <button id="refresh-logs">Refresh</button>
        <button id="refresh-log-stats">Stats</button>
      </div>

      <div class="filters">
        <label>Level
          <select id="logs-level">
            <option value="">(any)</option>
            <option value="trace">trace</option>
            <option value="debug">debug</option>
            <option value="info">info</option>
            <option value="warn">warn</option>
            <option value="error">error</option>
          </select>
        </label>
        <label>Component <input id="logs-component" type="text" placeholder="a2a.routes"></label>
        <label>Event <input id="logs-event" type="text" placeholder="invoke"></label>
        <label>Trace ID <input id="logs-trace" type="text" placeholder="a2a_..."></label>
        <label>Conversation ID <input id="logs-conversation" type="text" placeholder="conv_..."></label>
        <label>Token ID <input id="logs-token" type="text" placeholder="tok_..."></label>
        <label>Search <input id="logs-search" type="text" placeholder="text"></label>
        <label>Limit <input id="logs-limit" type="number" min="1" max="1000" value="200"></label>
      </div>

      <div id="log-stats" class="card"></div>

      <table id="logs-table">
        <thead>
          <tr>
            <th>Time</th>
            <th>Level</th>
            <th>Component</th>
            <th>Event</th>
            <th>Message</th>
            <th>Trace</th>
            <th>Conv</th>
            <th>Tok</th>
            <th>Code</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>

      <div id="trace-detail" class="card"></div>
    </section>

    <section id="tab-settings" class="panel">
      <h2>Tier Settings</h2>
      <div class="row">
        <label for="tier-select">Tier</label>
        <select id="tier-select"></select>
        <button id="new-tier-btn">New Tier</button>
      </div>

      <form id="tier-form">
        <label>Tier ID <input id="tier-id" type="text" readonly></label>
        <label>Name <input id="tier-name" type="text"></label>
        <label>Description <input id="tier-description" type="text"></label>
        <label>Disclosure <input id="tier-disclosure" type="text" placeholder="minimal"></label>
        <label>Topics (one per line)<textarea id="tier-topics" rows="6"></textarea></label>
        <label>Goals (one per line)<textarea id="tier-goals" rows="6"></textarea></label>
        <div class="row">
          <button type="submit">Save Tier</button>
        </div>
      </form>

      <div class="row">
        <label for="copy-from-tier">Copy from</label>
        <select id="copy-from-tier"></select>
        <button id="copy-tier-btn">Copy Tier</button>
      </div>

      <h3>Defaults</h3>
      <form id="defaults-form">
        <label>Expiration <input id="defaults-expiration" type="text" placeholder="7d"></label>
        <label>Max Calls <input id="defaults-max-calls" type="number" min="1"></label>
        <div class="row">
          <button type="submit">Save Defaults</button>
        </div>
      </form>

      <h3>New Tier</h3>
      <form id="new-tier-form">
        <label>Tier ID <input id="new-tier-id" type="text" placeholder="partners"></label>
        <label>Name <input id="new-tier-name" type="text" placeholder="Partners"></label>
        <label>Copy from
          <select id="new-tier-copy-from">
            <option value="">None</option>
          </select>
        </label>
        <div class="row">
          <button type="submit">Create Tier</button>
        </div>
      </form>

      <h3>Remote Callbook</h3>
      <div id="callbook-status" class="card"></div>

      <form id="callbook-provision-form" class="card">
        <div class="row">
          <button type="submit">Create Install Link (24h)</button>
          <button id="callbook-refresh" type="button">Refresh</button>
          <button id="callbook-logout" type="button">Logout This Browser</button>
        </div>
        <label>Device label <input id="callbook-label" type="text" value="Callbook Remote"></label>
        <label>Install URL<textarea id="callbook-install-url" rows="3" readonly></textarea></label>
        <div class="row">
          <button id="callbook-copy-url" type="button">Copy Link</button>
        </div>
        <div id="callbook-warnings" class="mono"></div>
      </form>

      <div class="card">
        <div class="row">
          <strong>Paired Devices</strong>
          <button id="callbook-refresh-devices" type="button">Refresh Devices</button>
        </div>
        <table id="callbook-devices-table">
          <thead>
            <tr>
              <th>Label</th>
              <th>Created</th>
              <th>Last Used</th>
              <th>Sessions</th>
              <th>Revoked</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <section id="tab-invites" class="panel">
      <h2>Generate Invite</h2>
      <form id="invite-form">
        <label>Name <input id="invite-name" type="text" required></label>
        <label>Owner <input id="invite-owner" type="text"></label>
        <label>Tier <select id="invite-tier"></select></label>
        <label>Expires <input id="invite-expires" type="text" value="7d"></label>
        <label>Max Calls <input id="invite-max-calls" type="number" min="1" value="100"></label>
        <label>Notify <input id="invite-notify" type="text" value="all"></label>
        <div class="row">
          <button type="submit">Create Invite</button>
        </div>
      </form>

      <label>Invite Message<textarea id="invite-message" rows="8" readonly></textarea></label>

      <div class="row">
        <h3>Existing Invites</h3>
        <button id="refresh-invites">Refresh</button>
      </div>
      <table id="invites-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Tier</th>
            <th>Calls</th>
            <th>Expires</th>
            <th>Status</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>

    <div id="notice"></div>
  </main>

  <script src="./app.js"></script>
</body>
</html>
